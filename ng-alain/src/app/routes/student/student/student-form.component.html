<page-header [title]="'学生录入表单'">
  用于手工添加少量的学生信息表单
</page-header>
<form nz-form [formGroup]="form" (ngSubmit)="_submitForm()" [nzLayout]="'vertical'">
  <nz-card [nzBordered]="false" nzTitle="主体信息">
    <nz-row nzGutter="16">
      <nz-col nzLg="6" nzMd="12" nzSm="24">
        <nz-form-item>
          <nz-form-label>姓名</nz-form-label>
          <nz-form-control>
            <input nz-input [(ngModel)]="vo.sname" formControlName="sname" placeholder="请输入学生姓名">
          </nz-form-control>
        </nz-form-item>
      </nz-col>
      <nz-col [nzXl]="{span:6, offset:2}" [nzLg]="{span:8}" [nzMd]="{span:12}" nzSm="24">
        <nz-form-item>
          <nz-form-label>学号</nz-form-label>
          <nz-form-control>
            <input nz-input [(ngModel)]="vo.sno" formControlName="sno" placeholder="请输入学生学号">
          </nz-form-control>
        </nz-form-item>
      </nz-col>
      <nz-col [nzXl]="{span:8, offset:2}" [nzLg]="{span:10}" [nzMd]="{span:24}" nzSm="24">
        <nz-form-item>
          <nz-form-label>联系电话</nz-form-label>
          <nz-form-control>
            <input nz-input [(ngModel)]="vo.phoneNum" formControlName="phoneNum" placeholder="联系电话">
          </nz-form-control>
        </nz-form-item>
      </nz-col>
    </nz-row>
    <nz-row nzGutter="16">
      <nz-col nzLg="6" nzMd="12" nzSm="24">
        <nz-form-item>
          <nz-form-label>性别</nz-form-label>
          <nz-form-control>
            <nz-select [(ngModel)]="vo.gender" [compareWith]="_util.myCompareFn" formControlName="gender">
              <nz-option *ngFor="let option of _util._enum.gender" [nzLabel]="option.name" [nzValue]="option.name"></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </nz-col>
      <nz-col [nzXl]="{span:6, offset:2}" [nzLg]="{span:8}" [nzMd]="{span:12}" nzSm="24">
        <nz-form-item>
          <nz-form-label>班级</nz-form-label>
          <nz-form-control>
            <input nz-input [(ngModel)]="vo.className" formControlName="className" placeholder="班级">
          </nz-form-control>
        </nz-form-item>
      </nz-col>
      <nz-col [nzXl]="{span:8, offset:2}" [nzLg]="{span:10}" [nzMd]="{span:24}" nzSm="24">
        <nz-form-item>
          <nz-form-label>班级全称</nz-form-label>
          <nz-form-control>
            <!--            <nz-select formControlName="owner2" [nzPlaceHolder]="'请选择执行人'" [nzShowSearch]="true">
                          <nz-option *ngFor="let i of users" [nzLabel]="i.label" [nzValue]="i.value">
                          </nz-option>
                        </nz-select>-->
            <input nz-input [(ngModel)]="vo.classAllName"  formControlName="classAllName" placeholder="班级全称">
          </nz-form-control>
        </nz-form-item>
      </nz-col>
    </nz-row>

    <nz-row nzGutter="16">
      <nz-col nzLg="6" nzMd="12" nzSm="24">
        <nz-form-item>
          <nz-form-label>QQ</nz-form-label>
          <nz-form-control>
            <input nz-input [(ngModel)]="vo.qqNum"  formControlName="qqNum" placeholder="QQ">
          </nz-form-control>
        </nz-form-item>
      </nz-col>
      <nz-col [nzXl]="{span:6, offset:2}" [nzLg]="{span:8}" [nzMd]="{span:12}" nzSm="24">
        <nz-form-item>
          <nz-form-label>宿舍号</nz-form-label>
          <nz-form-control>
            <input nz-input [(ngModel)]="vo.dorm" formControlName="dorm" placeholder="宿舍号">
          </nz-form-control>
        </nz-form-item>
      </nz-col>
      <nz-col [nzXl]="{span:8, offset:2}" [nzLg]="{span:10}" [nzMd]="{span:24}" nzSm="24">
        <nz-form-item>
          <nz-form-label>备注</nz-form-label>
          <nz-form-control>
            <input nz-input [(ngModel)]="vo.remark" formControlName="remark" placeholder="备注">
          </nz-form-control>
        </nz-form-item>
      </nz-col>
    </nz-row>
  </nz-card>

  <nz-card [nzBordered]="false" nzTitle="基本信息">
    <nz-row nzGutter="16">
      <nz-col nzLg="6" nzMd="12" nzSm="24">
        <nz-form-item>
          <nz-form-label>年级</nz-form-label>
          <nz-form-control>
            <input nz-input [(ngModel)]="vo.gradeName" formControlName="gradeName" placeholder="年级">
          </nz-form-control>
        </nz-form-item>
      </nz-col>
      <nz-col [nzXl]="{span:6, offset:2}" [nzLg]="{span:8}" [nzMd]="{span:12}" nzSm="24">
        <nz-form-item>
          <nz-form-label>专业</nz-form-label>
          <nz-form-control>
            <input nz-input [(ngModel)]="vo.majorName" formControlName="majorName" placeholder="专业">
          </nz-form-control>
        </nz-form-item>
      </nz-col>
      <nz-col [nzXl]="{span:8, offset:2}" [nzLg]="{span:10}" [nzMd]="{span:24}" nzSm="24">
        <nz-form-item>
          <nz-form-label>政治面貌</nz-form-label>
          <nz-form-control>
            <nz-select [(ngModel)]="vo.politicalStatus" [compareWith]="_util.myCompareFn" formControlName="politicalStatus">
              <nz-option *ngFor="let option of _util._enum.politicalStatus" [nzLabel]="option.name" [nzValue]="option.name"></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </nz-col>
    </nz-row>
    <nz-row nzGutter="16">
      <nz-col nzLg="6" nzMd="12" nzSm="24">
        <nz-form-item>
          <nz-form-label>状态</nz-form-label>
          <nz-form-control>
            <nz-select [(ngModel)]="vo.status" [compareWith]="_util.myCompareFn" formControlName="status">
              <nz-option *ngFor="let option of _util._enum.status" [nzLabel]="option.name" [nzValue]="option.name"></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </nz-col>
      <nz-col [nzXl]="{span:6, offset:2}" [nzLg]="{span:8}" [nzMd]="{span:12}" nzSm="24">
        <nz-form-item>
          <nz-form-label>民族</nz-form-label>
          <nz-form-control>
            <input nz-input [(ngModel)]="vo.nation" formControlName="nation" placeholder="名族">
          </nz-form-control>
        </nz-form-item>
      </nz-col>
      <nz-col [nzXl]="{span:8, offset:2}" [nzLg]="{span:10}" [nzMd]="{span:24}" nzSm="24">
        <nz-form-item>
          <nz-form-label>身份证号</nz-form-label>
          <nz-form-control>
            <input nz-input [(ngModel)]="vo.idcard" formControlName="idcard" placeholder="身份证号">
          </nz-form-control>
        </nz-form-item>
      </nz-col>
    </nz-row>

    <nz-row nzGutter="16">
      <nz-col nzLg="6" nzMd="12" nzSm="24">
        <nz-form-item>
          <nz-form-label>出生日期</nz-form-label>
          <nz-form-control>
            <nz-date-picker [(ngModel)]="vo.birthday" formControlName="birthday" nzShowTime></nz-date-picker>
          </nz-form-control>
        </nz-form-item>
      </nz-col>
      <nz-col [nzXl]="{span:6, offset:2}" [nzLg]="{span:8}" [nzMd]="{span:12}" nzSm="24">
      </nz-col>
      <nz-col [nzXl]="{span:8, offset:2}" [nzLg]="{span:10}" [nzMd]="{span:24}" nzSm="24">
      </nz-col>
    </nz-row>
  </nz-card>

  <nz-card [nzBordered]="false" nzTitle="家庭成员">
    <nz-table formArrayName="homes" [nzData]="homes.value" [nzShowPagination]="false">
      <thead>
      <tr>
        <th>姓名</th>
        <th>亲属关系</th>
        <th>工作单位</th>
        <th>联系电话</th>
        <th>家庭住址</th>
        <th>微信号</th>
        <th>操作</th>
      </tr>
      </thead>
      <tbody>
        <tr *ngFor="let home of homes.controls; let i = index" [formGroupName]="i">
          <td>
            <span *ngIf="editIndex!==i">{{ homes.value[i].name }}</span>
            <span *ngIf="editIndex===i" nz-form-control>
              <input nz-input formControlName="name" placeholder="请输入成员姓名">
            </span>
          </td>
          <td>
            <span *ngIf="editIndex!==i">{{ homes.value[i].relation }}</span>
            <span *ngIf="editIndex===i" nz-form-control>
              <input nz-input formControlName="relation" placeholder="请输入亲属关系">
            </span>
          </td>
          <td>
            <span *ngIf="editIndex!==i">{{ homes.value[i].workplace }}</span>
            <span *ngIf="editIndex===i" nz-form-control>
              <input nz-input formControlName="workplace" placeholder="请输入工作单位">
            </span>
          </td>
          <td>
            <span *ngIf="editIndex!==i">{{ homes.value[i].telNum }}</span>
            <span *ngIf="editIndex===i" nz-form-control>
              <input nz-input formControlName="telNum" placeholder="请输入联系电话">
            </span>
          </td>
          <td>
            <span *ngIf="editIndex!==i">{{ homes.value[i].address }}</span>
            <span *ngIf="editIndex===i" nz-form-control>
              <input nz-input formControlName="address" placeholder="请输入家庭住址">
            </span>
          </td>
          <td>
            <span *ngIf="editIndex!==i">{{ homes.value[i].wechat }}</span>
            <span *ngIf="editIndex===i" nz-form-control>
              <input nz-input formControlName="wechat" placeholder="请输入微信号">
            </span>
          </td>
          <td>
            <span *ngIf="editIndex!==i">
              <a (click)="edit(i)">编辑</a>
              <nz-divider nzType="vertical"></nz-divider>
              <nz-popconfirm (nzOnConfirm)="del(i)" [nzTitle]="'是否要删除此行？'">
                <a nz-popconfirm>删除</a>
              </nz-popconfirm>
            </span>
            <span *ngIf="editIndex===i">
              <a (click)="save(i)">保存</a>
              <nz-divider nzType="vertical"></nz-divider>
              <nz-popconfirm (nzOnConfirm)="cancel(i)" [nzTitle]="'是否要取消操作？'">
                <a nz-popconfirm>取消</a>
              </nz-popconfirm>
            </span>
          </td>
        </tr>
      </tbody>
    </nz-table>
    <button *ngIf="editIndex===-1" nz-button [nzType]="'dashed'" (click)="add()" class="ant-btn__block mt-md">
      <i class="anticon anticon-plus"></i>
      <span>新增成员</span>
    </button>
  </nz-card>

  <footer-toolbar errorCollect>
    <button nz-button type="primary" nzType="primary">提交</button>
  </footer-toolbar>
</form>
